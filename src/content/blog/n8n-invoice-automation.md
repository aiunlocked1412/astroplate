---
title: "n8n Invoice Automation ‡∏î‡πâ‡∏ß‡∏¢ AI: ‡∏™‡∏£‡πâ‡∏≤‡∏á ‡∏™‡πà‡∏á ‡πÅ‡∏•‡∏∞‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏´‡∏ô‡∏µ‡πâ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥"
meta_title: "n8n Invoice Automation | ‡∏£‡∏∞‡∏ö‡∏ö‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏´‡∏ô‡∏µ‡πâ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏î‡πâ‡∏ß‡∏¢ AI"
description: "‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏∞‡∏ö‡∏ö Invoice Automation ‡∏î‡πâ‡∏ß‡∏¢ n8n ‡∏≠‡πà‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏î‡πâ‡∏ß‡∏¢ AI OCR ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏´‡∏ô‡∏µ‡πâ ‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏• ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô ‡πÅ‡∏•‡∏∞‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥"
date: 2025-10-23T06:00:00Z
image: "/images/blog-default.svg"
categories: ["n8n", "Automation", "AI", "Finance"]
author: "AI Unlocked Team"
tags: ["n8n", "invoice automation", "AI OCR", "accounting automation", "payment tracking", "‡∏Ñ‡∏≠‡∏£‡πå‡∏™ n8n"]
draft: false
---

# n8n Invoice Automation ‡∏î‡πâ‡∏ß‡∏¢ AI: ‡∏™‡∏£‡πâ‡∏≤‡∏á ‡∏™‡πà‡∏á ‡πÅ‡∏•‡∏∞‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏´‡∏ô‡∏µ‡πâ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥

‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏´‡∏ô‡∏µ‡πâ (Invoice) ‡πÄ‡∏õ‡πá‡∏ô‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏•‡∏≤‡∏°‡∏≤‡∏Å‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡∏ó‡∏∏‡∏Å‡∏Ç‡∏ô‡∏≤‡∏î ‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πà‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏´‡∏ô‡∏µ‡πâ ‡∏™‡πà‡∏á‡πÉ‡∏´‡πâ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô ‡πÑ‡∏õ‡∏à‡∏ô‡∏ñ‡∏∂‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏Ñ‡πâ‡∏≤‡∏á‡∏ä‡∏≥‡∏£‡∏∞

‡∏î‡πâ‡∏ß‡∏¢ **n8n** ‡πÅ‡∏•‡∏∞ **AI** ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏∞‡∏ö‡∏ö **Invoice Automation** ‡∏ó‡∏µ‡πà:
- ‡∏≠‡πà‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£/‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏î‡πâ‡∏ß‡∏¢ AI OCR
- ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏´‡∏ô‡∏µ‡πâ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ (PDF)
- ‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô
- ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô
- ‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÉ‡∏Å‡∏•‡πâ‡∏Ñ‡∏£‡∏ö‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏Å‡∏¥‡∏ô‡∏Å‡∏≥‡∏´‡∏ô‡∏î
- ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡∏∞‡∏ö‡∏ö‡∏ö‡∏±‡∏ç‡∏ä‡∏µ (Xero, QuickBooks)
- Generate ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥

‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏™‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á end-to-end invoice automation system ‡∏ó‡∏µ‡πà‡∏ä‡πà‡∏ß‡∏¢‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏•‡∏∞‡∏•‡∏î errors

## ‡∏™‡∏≤‡∏£‡∏ö‡∏±‡∏ç

- [‡∏ó‡∏≥‡πÑ‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥ Invoice Automation?](#why-automation)
- [‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡πÅ‡∏•‡∏∞‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ](#tools)
- [‡∏™‡∏ñ‡∏≤‡∏õ‡∏±‡∏ï‡∏¢‡∏Å‡∏£‡∏£‡∏°‡∏£‡∏∞‡∏ö‡∏ö](#architecture)
- [Workflow 1: Create Invoice from Order](#create-invoice)
- [Workflow 2: AI OCR - Extract Invoice Data](#ai-ocr)
- [Workflow 3: Send Invoice & Payment Link](#send-invoice)
- [Workflow 4: Payment Tracking & Reconciliation](#payment-tracking)
- [Workflow 5: Auto Reminder for Overdue](#auto-reminder)
- [Integration ‡∏Å‡∏±‡∏ö Accounting Software](#accounting-integration)
- [Multi-currency & Tax Handling](#multi-currency)
- [Reporting & Analytics](#reporting)
- [Best Practices](#best-practices)
- [‡∏Å‡∏£‡∏ì‡∏µ‡∏®‡∏∂‡∏Å‡∏©‡∏≤: Freelance Agency](#case-study)
- [FAQ](#faq)
- [‡∏™‡∏£‡∏∏‡∏õ](#conclusion)

## ‡∏ó‡∏≥‡πÑ‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥ Invoice Automation? {#why-automation}

### ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏Ç‡∏≠‡∏á Manual Invoicing

1. **Time-consuming** - ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏´‡∏ô‡∏µ‡πâ‡∏ó‡∏µ‡∏•‡∏∞‡πÉ‡∏ö‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏•‡∏≤ 10-30 ‡∏ô‡∏≤‡∏ó‡∏µ/‡πÉ‡∏ö
2. **Human errors** - ‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì, ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤, ‡∏†‡∏≤‡∏©‡∏µ
3. **Delay** - ‡∏™‡πà‡∏á‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏´‡∏ô‡∏µ‡πâ‡∏ä‡πâ‡∏≤ ‚Üí ‡πÑ‡∏î‡πâ‡πÄ‡∏á‡∏¥‡∏ô‡∏ä‡πâ‡∏≤ ‚Üí cashflow ‡πÑ‡∏°‡πà‡∏î‡∏µ
4. **Manual follow-up** - ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏ä‡πá‡∏Ñ‡πÅ‡∏•‡∏∞‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏î‡πâ‡∏ß‡∏¢‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á
5. **No visibility** - ‡πÑ‡∏°‡πà‡∏£‡∏π‡πâ‡∏ß‡πà‡∏≤‡πÉ‡∏ö‡πÑ‡∏´‡∏ô‡∏à‡πà‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß ‡πÉ‡∏ö‡πÑ‡∏´‡∏ô‡∏Ñ‡πâ‡∏≤‡∏á

### ‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏ä‡∏ô‡πå‡∏Ç‡∏≠‡∏á Automation

‚úÖ **‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î‡πÄ‡∏ß‡∏•‡∏≤ 90%** (30 ‡∏ô‡∏≤‡∏ó‡∏µ ‚Üí 3 ‡∏ô‡∏≤‡∏ó‡∏µ)
‚úÖ **Zero errors** ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÅ‡∏•‡∏∞‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
‚úÖ **Get paid faster** ‡∏™‡πà‡∏á‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏™‡∏£‡πá‡∏à‡∏á‡∏≤‡∏ô
‚úÖ **Auto follow-up** ‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ ‡πÑ‡∏°‡πà‡∏•‡∏∑‡∏°
‚úÖ **Real-time tracking** ‡∏£‡∏π‡πâ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ó‡∏∏‡∏Å‡πÉ‡∏ö‡∏ï‡∏•‡∏≠‡∏î‡πÄ‡∏ß‡∏•‡∏≤
‚úÖ **Better cashflow** ‡πÑ‡∏î‡πâ‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏£‡πá‡∏ß‡∏Ç‡∏∂‡πâ‡∏ô 30-50%

### ROI Example

**‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏´‡∏ô‡∏µ‡πâ 100 ‡πÉ‡∏ö/‡πÄ‡∏î‡∏∑‡∏≠‡∏ô:**

```
Manual:
- ‡πÄ‡∏ß‡∏•‡∏≤: 100 ‡πÉ‡∏ö √ó 20 ‡∏ô‡∏≤‡∏ó‡∏µ = 2,000 ‡∏ô‡∏≤‡∏ó‡∏µ (33 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á)
- ‡∏Ñ‡πà‡∏≤‡πÅ‡∏£‡∏á: 33 ‡∏ä‡∏°. √ó 300 ‡∏ö‡∏≤‡∏ó/‡∏ä‡∏°. = 9,900 ‡∏ö‡∏≤‡∏ó
- Late payment: ~30% √ó 7 ‡∏ß‡∏±‡∏ô‡∏•‡πà‡∏≤‡∏ä‡πâ‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢ = ‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô

Automated:
- ‡πÄ‡∏ß‡∏•‡∏≤: 100 ‡πÉ‡∏ö √ó 2 ‡∏ô‡∏≤‡∏ó‡∏µ = 200 ‡∏ô‡∏≤‡∏ó‡∏µ (3.3 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á)
- ‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢: ~$50/‡πÄ‡∏î‡∏∑‡∏≠‡∏ô (~1,700 ‡∏ö‡∏≤‡∏ó)
- Late payment: ~10% √ó 2 ‡∏ß‡∏±‡∏ô‡∏•‡πà‡∏≤‡∏ä‡πâ‡∏≤

‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î: 9,900 - 1,700 = 8,200 ‡∏ö‡∏≤‡∏ó/‡πÄ‡∏î‡∏∑‡∏≠‡∏ô + better cashflow
```

## ‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡πÅ‡∏•‡∏∞‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ {#tools}

### Invoice Generation

**1. PDF Libraries**
- **Puppeteer** (HTML ‚Üí PDF) ‚≠ê ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥
- **PDFKit** (programmatic PDF)
- **wkhtmltopdf**
- **Gotenberg** (API-based)

**2. Invoice Templates**
- HTML/CSS templates
- Figma ‚Üí HTML export
- Ready-made templates (Invoice Generator)

### AI OCR (Optical Character Recognition)

**1. OpenAI GPT-4 Vision** ‚≠ê ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥
- ‡∏≠‡πà‡∏≤‡∏ô‡∏£‡∏π‡∏õ invoice ‡πÑ‡∏î‡πâ‡∏î‡∏µ
- Extract structured data
- ‡∏£‡∏≤‡∏Ñ‡∏≤: $0.01/image

**2. Google Cloud Vision API**
- Document OCR
- Form parsing
- ‡∏£‡∏≤‡∏Ñ‡∏≤: $1.50/1,000 images

**3. Tesseract OCR**
- Open source
- ‡∏ü‡∏£‡∏µ ‡πÅ‡∏ï‡πà accuracy ‡∏ï‡πà‡∏≥‡∏Å‡∏ß‡πà‡∏≤ AI

### Payment Gateways

**1. Stripe**
- Payment links
- Invoice API
- Webhooks (payment success)

**2. PayPal**
- Invoice API
- Payment buttons

**3. Omise (Thailand)**
- Payment links
- QR PromptPay
- Webhooks

### Accounting Software

**1. Xero**
- API ‡∏Ñ‡∏£‡∏ö‡∏Ñ‡∏£‡∏±‡∏ô
- n8n Node: ‚úÖ Official

**2. QuickBooks**
- API available
- n8n Node: ‚ö†Ô∏è Via HTTP

**3. Wave**
- Free accounting software
- API available

**4. Google Sheets**
- Simple alternative
- n8n Node: ‚úÖ Official

### Email & Communication

- **Gmail** (personal/small business)
- **SendGrid** (transactional emails)
- **Mailgun** (developers)
- **LINE Notify** (Thailand)

## ‡∏™‡∏ñ‡∏≤‡∏õ‡∏±‡∏ï‡∏¢‡∏Å‡∏£‡∏£‡∏°‡∏£‡∏∞‡∏ö‡∏ö {#architecture}

### Complete Invoice Automation Flow

```
Order Completed (Trigger)
    ‚Üì
Create Invoice Data
    ‚Üì
Generate PDF Invoice
    ‚Üì
Upload PDF to Cloud Storage
    ‚Üì
Create Payment Link (Stripe/Omise)
    ‚Üì
Send Email to Customer
    ‚Üì
Track Payment Status
    ‚Üì
[IF Paid]
    ‚Üí Mark as Paid
    ‚Üí Send Thank You Email
    ‚Üí Update Accounting System
    ‚Üí Generate Receipt
[IF Not Paid After 7 Days]
    ‚Üí Send Reminder 1
[IF Not Paid After 14 Days]
    ‚Üí Send Reminder 2
[IF Not Paid After 30 Days]
    ‚Üí Send Final Notice
    ‚Üí Flag for Collection
```

### Database Schema

**Invoices Table:**
```sql
CREATE TABLE invoices (
  id SERIAL PRIMARY KEY,
  invoice_number VARCHAR UNIQUE,
  customer_id INTEGER,
  customer_name VARCHAR,
  customer_email VARCHAR,
  issue_date DATE,
  due_date DATE,
  items JSONB,
  subtotal DECIMAL,
  tax DECIMAL,
  total DECIMAL,
  currency VARCHAR DEFAULT 'THB',
  status VARCHAR, -- draft, sent, paid, overdue, cancelled
  payment_link VARCHAR,
  pdf_url VARCHAR,
  paid_at TIMESTAMP,
  payment_method VARCHAR,
  notes TEXT,
  created_at TIMESTAMP DEFAULT NOW()
);
```

## Workflow 1: Create Invoice from Order {#create-invoice}

### Scenario: E-commerce order ‚Üí Auto generate invoice

**1. Trigger: New Order (Webhook)**

```javascript
// Webhook from Shopify/WooCommerce/Custom app
Webhook Node
Path: /order-completed
Method: POST

// Expected data:
{
  "order_id": "ORD-12345",
  "customer": {
    "name": "‡∏ô‡∏≤‡∏¢‡∏™‡∏°‡∏ä‡∏≤‡∏¢ ‡πÉ‡∏à‡∏î‡∏µ",
    "email": "somchai@example.com",
    "phone": "081-234-5678",
    "address": "123 ‡∏ñ.‡∏™‡∏∏‡∏Ç‡∏∏‡∏°‡∏ß‡∏¥‡∏ó ‡∏Å‡∏ó‡∏°. 10110"
  },
  "items": [
    {
      "name": "‡∏Ñ‡∏≠‡∏£‡πå‡∏™ AI ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ú‡∏π‡πâ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô",
      "quantity": 1,
      "unit_price": 2990,
      "total": 2990
    }
  ],
  "subtotal": 2990,
  "tax": 209.30, // 7%
  "total": 3199.30,
  "currency": "THB"
}
```

**2. Generate Invoice Number**

```javascript
// Code Node - Generate sequential invoice number
const getNextInvoiceNumber = async () => {
  // Query database for last invoice
  const lastInvoice = await db.query(`
    SELECT invoice_number FROM invoices
    ORDER BY created_at DESC LIMIT 1
  `);

  // Generate new number (format: INV-2025-0001)
  const year = new Date().getFullYear();
  const lastNum = lastInvoice ? parseInt(lastInvoice.split('-')[2]) : 0;
  const nextNum = (lastNum + 1).toString().padStart(4, '0');

  return `INV-${year}-${nextNum}`;
};

const invoiceNumber = await getNextInvoiceNumber();
// Result: "INV-2025-0123"
```

**3. Prepare Invoice Data**

```javascript
// Code Node - Structure invoice data
const invoiceData = {
  invoice_number: $json.invoiceNumber,
  issue_date: new Date().toISOString().split('T')[0],
  due_date: new Date(Date.now() + 30*24*60*60*1000).toISOString().split('T')[0], // +30 days

  // Company info
  company: {
    name: '‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó ‡πÄ‡∏≠‡πÑ‡∏≠ ‡∏≠‡∏±‡∏ô‡∏•‡πá‡∏≠‡∏Å ‡∏≠‡∏¥‡∏ô‡πÇ‡∏ô‡πÄ‡∏ß‡∏ä‡∏±‡πà‡∏ô ‡∏à‡∏≥‡∏Å‡∏±‡∏î',
    address: '123 ‡∏ñ.‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á ‡∏à.‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà 50000',
    tax_id: '0123456789012',
    phone: '053-123456',
    email: 'aiunlockinnovations@gmail.com'
  },

  // Customer info
  customer: {
    name: $json.customer.name,
    email: $json.customer.email,
    phone: $json.customer.phone,
    address: $json.customer.address
  },

  // Line items
  items: $json.items,

  // Totals
  subtotal: $json.subtotal,
  tax: $json.tax,
  tax_rate: 0.07, // 7%
  total: $json.total,
  currency: $json.currency || 'THB',

  // Payment info
  payment_terms: 'Net 30',
  payment_methods: ['Bank Transfer', 'PromptPay', 'Credit Card'],

  // Bank details
  bank_account: {
    bank: '‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡∏Å‡∏™‡∏¥‡∏Å‡∏£‡πÑ‡∏ó‡∏¢',
    account_name: '‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó ‡πÄ‡∏≠‡πÑ‡∏≠ ‡∏≠‡∏±‡∏ô‡∏•‡πá‡∏≠‡∏Å ‡∏≠‡∏¥‡∏ô‡πÇ‡∏ô‡πÄ‡∏ß‡∏ä‡∏±‡πà‡∏ô ‡∏à‡∏≥‡∏Å‡∏±‡∏î',
    account_number: '123-4-56789-0',
    promptpay: '0123456789012' // Tax ID
  }
};

return { json: invoiceData };
```

**4. Generate PDF Invoice**

```javascript
// HTTP Request - Gotenberg (HTML to PDF service)
// Or use Puppeteer via Code Node

// Option 1: Gotenberg API
Method: POST
URL: http://gotenberg:3000/forms/chromium/convert/html

Body (Form-Data):
  index.html: {{ $json.htmlTemplate }}

// Option 2: Code Node with Puppeteer
const puppeteer = require('puppeteer');

const generatePDF = async (invoiceData) => {
  const browser = await puppeteer.launch();
  const page = await browser.newPage();

  // HTML template
  const html = `
  <!DOCTYPE html>
  <html>
  <head>
    <meta charset="UTF-8">
    <style>
      body { font-family: 'Sarabun', sans-serif; }
      .invoice { max-width: 800px; margin: 0 auto; padding: 40px; }
      .header { border-bottom: 2px solid #6366f1; padding-bottom: 20px; }
      .company-name { font-size: 24px; font-weight: bold; color: #6366f1; }
      table { width: 100%; border-collapse: collapse; margin: 20px 0; }
      th, td { padding: 12px; text-align: left; border-bottom: 1px solid #ddd; }
      .total { font-size: 20px; font-weight: bold; }
    </style>
  </head>
  <body>
    <div class="invoice">
      <!-- Header -->
      <div class="header">
        <div class="company-name">${invoiceData.company.name}</div>
        <div>${invoiceData.company.address}</div>
        <div>Tax ID: ${invoiceData.company.tax_id}</div>
        <div>Tel: ${invoiceData.company.phone}</div>
      </div>

      <!-- Invoice Info -->
      <div style="margin: 30px 0;">
        <h2>‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏´‡∏ô‡∏µ‡πâ / Invoice</h2>
        <div>‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà: ${invoiceData.invoice_number}</div>
        <div>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà: ${invoiceData.issue_date}</div>
        <div>‡∏Ñ‡∏£‡∏ö‡∏Å‡∏≥‡∏´‡∏ô‡∏î: ${invoiceData.due_date}</div>
      </div>

      <!-- Customer Info -->
      <div style="margin: 20px 0;">
        <strong>‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ / Bill To:</strong><br>
        ${invoiceData.customer.name}<br>
        ${invoiceData.customer.address}<br>
        ${invoiceData.customer.email}<br>
        ${invoiceData.customer.phone}
      </div>

      <!-- Items Table -->
      <table>
        <thead>
          <tr>
            <th>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</th>
            <th>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</th>
            <th>‡∏£‡∏≤‡∏Ñ‡∏≤/‡∏´‡∏ô‡πà‡∏ß‡∏¢</th>
            <th>‡∏£‡∏ß‡∏°</th>
          </tr>
        </thead>
        <tbody>
          ${invoiceData.items.map(item => `
            <tr>
              <td>${item.name}</td>
              <td>${item.quantity}</td>
              <td>${item.unit_price.toLocaleString('th-TH')} ‡∏ö‡∏≤‡∏ó</td>
              <td>${item.total.toLocaleString('th-TH')} ‡∏ö‡∏≤‡∏ó</td>
            </tr>
          `).join('')}
        </tbody>
      </table>

      <!-- Totals -->
      <div style="text-align: right; margin: 20px 0;">
        <div>‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°: ${invoiceData.subtotal.toLocaleString('th-TH')} ‡∏ö‡∏≤‡∏ó</div>
        <div>‡∏†‡∏≤‡∏©‡∏µ (7%): ${invoiceData.tax.toLocaleString('th-TH')} ‡∏ö‡∏≤‡∏ó</div>
        <div class="total">‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏¥‡πâ‡∏ô: ${invoiceData.total.toLocaleString('th-TH')} ‡∏ö‡∏≤‡∏ó</div>
      </div>

      <!-- Payment Info -->
      <div style="margin: 30px 0; padding: 20px; background: #f5f5f5;">
        <strong>‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô:</strong><br>
        <strong>‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£:</strong> ${invoiceData.bank_account.bank}<br>
        <strong>‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ç‡∏ä‡∏µ:</strong> ${invoiceData.bank_account.account_name}<br>
        <strong>‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ç‡∏ä‡∏µ:</strong> ${invoiceData.bank_account.account_number}<br>
        <strong>PromptPay:</strong> ${invoiceData.bank_account.promptpay}
      </div>

      <!-- Footer -->
      <div style="margin-top: 40px; text-align: center; color: #666;">
        ‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£ | Thank you for your business
      </div>
    </div>
  </body>
  </html>
  `;

  await page.setContent(html);
  const pdf = await page.pdf({
    format: 'A4',
    printBackground: true
  });

  await browser.close();
  return pdf;
};

const pdfBuffer = await generatePDF($json.invoiceData);

return {
  json: { fileName: `${$json.invoice_number}.pdf` },
  binary: { data: pdfBuffer }
};
```

**5. Upload PDF to Cloud Storage**

```javascript
// Google Drive Node
Operation: Upload a File
File Name: {{ $json.fileName }}
Binary Data: {{ $binary.data }}
Folder: /Invoices/2025

// Or AWS S3
Operation: Upload
Bucket: company-invoices
Key: invoices/2025/{{ $json.fileName }}
ACL: private

// Get shareable link
```

**6. Save to Database**

```javascript
// PostgreSQL Node
Operation: Insert
Table: invoices

Data:
{
  invoice_number: "{{ $json.invoice_number }}",
  customer_name: "{{ $json.customer.name }}",
  customer_email: "{{ $json.customer.email }}",
  issue_date: "{{ $json.issue_date }}",
  due_date: "{{ $json.due_date }}",
  items: '{{ JSON.stringify($json.items) }}',
  subtotal: {{ $json.subtotal }},
  tax: {{ $json.tax }},
  total: {{ $json.total }},
  currency: "{{ $json.currency }}",
  status: "draft",
  pdf_url: "{{ $json.pdfUrl }}"
}
```

## Workflow 2: AI OCR - Extract Invoice Data {#ai-ocr}

### Scenario: ‡∏£‡∏±‡∏ö invoice PDF/‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û ‚Üí Extract ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥

**Use case:** ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å invoice ‡∏à‡∏≤‡∏Å‡∏ã‡∏±‡∏û‡∏û‡∏•‡∏≤‡∏¢‡πÄ‡∏≠‡∏≠‡∏£‡πå‡∏•‡∏á‡∏£‡∏∞‡∏ö‡∏ö

**1. Trigger: Email with Attachment**

```javascript
// Gmail Trigger Node
Operation: Get Emails
Filters:
  - Has attachment: true
  - Subject contains: "Invoice" OR "‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏´‡∏ô‡∏µ‡πâ"
  - From: supplier@example.com
```

**2. Download Attachment**

```javascript
// Gmail Node - Download attachment
// Returns binary data (PDF or image)
```

**3. Convert PDF to Image (if PDF)**

```javascript
// Code Node - pdf-lib or pdf2pic
const { fromPath } = require('pdf2pic');

const options = {
  density: 100,
  saveFilename: 'invoice',
  savePath: '/tmp',
  format: 'png',
  width: 1200,
  height: 1600
};

const convert = fromPath($binary.data, options);
const pageToConvert = 1;
const image = await convert(pageToConvert, { responseType: 'buffer' });

return {
  binary: { data: image }
};
```

**4. AI OCR with GPT-4 Vision**

```javascript
// HTTP Request - OpenAI GPT-4 Vision
Method: POST
URL: https://api.openai.com/v1/chat/completions

Headers:
  Authorization: Bearer {{ $credentials.openai.apiKey }}
  Content-Type: application/json

Body:
{
  "model": "gpt-4-vision-preview",
  "messages": [
    {
      "role": "user",
      "content": [
        {
          "type": "text",
          "text": `Extract all data from this invoice image and return in JSON format:

{
  "invoice_number": "...",
  "date": "YYYY-MM-DD",
  "due_date": "YYYY-MM-DD",
  "vendor": {
    "name": "...",
    "address": "...",
    "tax_id": "..."
  },
  "customer": {
    "name": "...",
    "address": "..."
  },
  "items": [
    {
      "description": "...",
      "quantity": 0,
      "unit_price": 0,
      "total": 0
    }
  ],
  "subtotal": 0,
  "tax": 0,
  "total": 0,
  "currency": "THB"
}

Extract numbers accurately. If field is unclear, use null.`
        },
        {
          "type": "image_url",
          "image_url": {
            "url": "data:image/png;base64,{{ $binary.data.toString('base64') }}"
          }
        }
      ]
    }
  ],
  "max_tokens": 2000
}

// Response:
{
  "choices": [{
    "message": {
      "content": "{\"invoice_number\": \"INV-001\", ...}"
    }
  }]
}
```

**5. Parse and Validate Data**

```javascript
// Code Node
const extractedData = JSON.parse($json.choices[0].message.content);

// Validate
const validate = (data) => {
  const errors = [];

  if (!data.invoice_number) errors.push('Missing invoice number');
  if (!data.total || data.total <= 0) errors.push('Invalid total');
  if (!data.vendor?.name) errors.push('Missing vendor name');

  return errors;
};

const errors = validate(extractedData);

if (errors.length > 0) {
  // Send for human review
  return {
    json: {
      ...extractedData,
      needsReview: true,
      errors: errors
    }
  };
}

return { json: extractedData };
```

**6. Save to Accounting System**

```javascript
// Xero Node / QuickBooks / Database
Operation: Create Bill
Data: {{ $json }}
```

## Workflow 3: Send Invoice & Payment Link {#send-invoice}

### Create payment link ‡πÅ‡∏•‡∏∞‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏û‡∏£‡πâ‡∏≠‡∏° invoice

**1. Create Stripe Payment Link**

```javascript
// HTTP Request - Stripe API
Method: POST
URL: https://api.stripe.com/v1/payment_links

Headers:
  Authorization: Bearer {{ $credentials.stripe.secretKey }}
  Content-Type: application/x-www-form-urlencoded

Body (URL-encoded):
  line_items[0][price_data][currency]={{ $json.currency.toLowerCase() }}
  line_items[0][price_data][product_data][name]=Invoice {{ $json.invoice_number }}
  line_items[0][price_data][unit_amount]={{ $json.total * 100 }} // cents
  line_items[0][quantity]=1
  after_completion[type]=redirect
  after_completion[redirect][url]=https://yoursite.com/thank-you
  metadata[invoice_id]={{ $json.invoice_number }}

// Response:
{
  "id": "plink_...",
  "url": "https://buy.stripe.com/..."
}
```

**2. Update Invoice with Payment Link**

```javascript
// PostgreSQL Node
Operation: Update
Table: invoices
Where: invoice_number = {{ $json.invoice_number }}

Set:
  payment_link: "{{ $json.stripe_url }}",
  status: "sent",
  sent_at: NOW()
```

**3. Send Email to Customer**

```javascript
// Gmail Node / SendGrid Node
Operation: Send Email

To: {{ $json.customer.email }}
Subject: ‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏´‡∏ô‡∏µ‡πâ #{{ $json.invoice_number }} ‡∏à‡∏≤‡∏Å AI Unlocked

Body (HTML):
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <style>
    body { font-family: 'Sarabun', Arial, sans-serif; }
    .container { max-width: 600px; margin: 0 auto; padding: 20px; }
    .button {
      display: inline-block;
      padding: 15px 30px;
      background: #6366f1;
      color: white;
      text-decoration: none;
      border-radius: 5px;
      margin: 20px 0;
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö‡∏Ñ‡∏∏‡∏ì {{ $json.customer.name }}</h2>

    <p>‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤</p>

    <p>‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏´‡∏ô‡∏µ‡πâ‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà <strong>{{ $json.invoice_number }}</strong> ‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏î‡∏±‡∏á‡∏ô‡∏µ‡πâ:</p>

    <ul>
      <li>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà: {{ $json.issue_date }}</li>
      <li>‡∏Ñ‡∏£‡∏ö‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ä‡∏≥‡∏£‡∏∞: {{ $json.due_date }}</li>
      <li>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô: <strong>{{ $json.total.toLocaleString('th-TH') }} ‡∏ö‡∏≤‡∏ó</strong></li>
    </ul>

    <p>‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏î‡πâ‡∏´‡∏•‡∏≤‡∏¢‡∏ß‡∏¥‡∏ò‡∏µ:</p>

    <a href="{{ $json.payment_link }}" class="button">
      ‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå (‡∏ö‡∏±‡∏ï‡∏£‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï/QR)
    </a>

    <p>‡∏´‡∏£‡∏∑‡∏≠‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏ú‡πà‡∏≤‡∏ô‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£:</p>
    <ul>
      <li>‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£: {{ $json.bank.name }}</li>
      <li>‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ç‡∏ä‡∏µ: {{ $json.bank.account_number }}</li>
      <li>PromptPay: {{ $json.bank.promptpay }}</li>
    </ul>

    <p>‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏´‡∏ô‡∏µ‡πâ‡πÅ‡∏ô‡∏ö‡∏°‡∏≤‡∏î‡πâ‡∏ß‡∏¢‡πÉ‡∏ô‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏ô‡∏µ‡πâ</p>

    <p>‡∏´‡∏≤‡∏Å‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏™‡∏á‡∏™‡∏±‡∏¢ ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÄ‡∏£‡∏≤‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà aiunlockinnovations@gmail.com</p>

    <p>‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏£‡∏±‡∏ö<br>
    AI Unlocked Team</p>
  </div>
</body>
</html>

Attachments:
  - {{ $binary.pdfData }} (invoice PDF)
```

## Workflow 4: Payment Tracking & Reconciliation {#payment-tracking}

### ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥

**1. Stripe Webhook - Payment Success**

```javascript
// Webhook Node
Path: /stripe-webhook
Method: POST

// Stripe sends:
{
  "type": "checkout.session.completed",
  "data": {
    "object": {
      "id": "cs_...",
      "amount_total": 319930, // cents
      "payment_status": "paid",
      "metadata": {
        "invoice_id": "INV-2025-0123"
      }
    }
  }
}
```

**2. Verify Webhook Signature**

```javascript
// Code Node - Verify Stripe signature
const stripe = require('stripe')($credentials.stripe.secretKey);

const sig = $request.headers['stripe-signature'];
const endpointSecret = $credentials.stripe.webhookSecret;

try {
  const event = stripe.webhooks.constructEvent(
    $request.rawBody,
    sig,
    endpointSecret
  );

  return { json: event };
} catch (err) {
  throw new Error('Invalid signature');
}
```

**3. Update Invoice Status**

```javascript
// PostgreSQL Node
Operation: Execute Query

Query:
UPDATE invoices
SET
  status = 'paid',
  paid_at = NOW(),
  payment_method = 'Stripe',
  payment_id = :paymentId
WHERE invoice_number = :invoiceId

Parameters:
  invoiceId: {{ $json.data.object.metadata.invoice_id }}
  paymentId: {{ $json.data.object.id }}
```

**4. Generate Receipt**

```javascript
// Similar to invoice generation
// But with "Receipt" / "‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô" template
```

**5. Send Thank You Email + Receipt**

```javascript
// Gmail Node
To: {{ $json.customer.email }}
Subject: ‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡πÅ‡∏•‡πâ‡∏ß - ‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à #{{ $json.invoice_number }}

Body:
‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö‡∏Ñ‡∏∏‡∏ì {{ $json.customer.name }},

‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡∏Ñ‡πà‡∏≤ {{ $json.items[0].name }}

‡πÄ‡∏£‡∏≤‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß‡πÉ‡∏ô‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà {{ $json.paid_at }}
‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô: {{ $json.total }} ‡∏ö‡∏≤‡∏ó

‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏ô‡∏ö‡∏°‡∏≤‡πÉ‡∏ô‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏ô‡∏µ‡πâ

‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏Ñ‡∏£‡∏±‡∏ö!

AI Unlocked Team

Attachments:
  - receipt.pdf
```

**6. Update Accounting System**

```javascript
// Xero Node / QuickBooks
Operation: Create Payment
Invoice ID: {{ $json.invoice_id }}
Amount: {{ $json.total }}
Date: {{ $json.paid_at }}
Account: {{ $json.bank_account }}
```

## Workflow 5: Auto Reminder for Overdue {#auto-reminder}

### ‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡πâ‡∏≤‡∏á‡∏ä‡∏≥‡∏£‡∏∞

**1. Schedule Trigger - Daily Check**

```javascript
// Schedule Node
Cron: 0 9 * * * // ‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô 9:00 AM
```

**2. Query Unpaid Invoices**

```javascript
// PostgreSQL Node
Operation: Execute Query

Query:
SELECT *
FROM invoices
WHERE status IN ('sent', 'overdue')
  AND due_date IS NOT NULL
ORDER BY due_date ASC
```

**3. Classify by Days Overdue**

```javascript
// Code Node
const now = new Date();

const classified = $input.all().map(invoice => {
  const dueDate = new Date(invoice.json.due_date);
  const daysUntilDue = Math.ceil((dueDate - now) / (1000*60*60*24));

  let reminderType;
  if (daysUntilDue === 3) {
    reminderType = 'approaching'; // 3 ‡∏ß‡∏±‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏Ñ‡∏£‡∏ö‡∏Å‡∏≥‡∏´‡∏ô‡∏î
  } else if (daysUntilDue === 0) {
    reminderType = 'due_today'; // ‡∏Ñ‡∏£‡∏ö‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ
  } else if (daysUntilDue < 0 && daysUntilDue >= -7) {
    reminderType = 'overdue_7'; // ‡πÄ‡∏Å‡∏¥‡∏ô 1-7 ‡∏ß‡∏±‡∏ô
  } else if (daysUntilDue < -7 && daysUntilDue >= -14) {
    reminderType = 'overdue_14'; // ‡πÄ‡∏Å‡∏¥‡∏ô 7-14 ‡∏ß‡∏±‡∏ô
  } else if (daysUntilDue < -14) {
    reminderType = 'overdue_30'; // ‡πÄ‡∏Å‡∏¥‡∏ô 14+ ‡∏ß‡∏±‡∏ô
  }

  return {
    json: {
      ...invoice.json,
      days_until_due: daysUntilDue,
      reminder_type: reminderType
    }
  };
});

return classified.filter(i => i.json.reminder_type);
```

**4. Switch Node - Route by Reminder Type**

```javascript
// Switch Node
Output 1: {{ $json.reminder_type === 'approaching' }}
Output 2: {{ $json.reminder_type === 'due_today' }}
Output 3: {{ $json.reminder_type === 'overdue_7' }}
Output 4: {{ $json.reminder_type === 'overdue_14' }}
Output 5: {{ $json.reminder_type === 'overdue_30' }}
```

**5. Send Appropriate Reminder**

**Reminder 1 (Approaching):**
```
Subject: ‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô: ‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏´‡∏ô‡∏µ‡πâ #{{ invoice_number }} ‡πÉ‡∏Å‡∏•‡πâ‡∏Ñ‡∏£‡∏ö‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ä‡∏≥‡∏£‡∏∞

‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö‡∏Ñ‡∏∏‡∏ì {{ customer_name }},

‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ß‡πà‡∏≤‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏´‡∏ô‡∏µ‡πâ #{{ invoice_number }} ‡∏à‡∏∞‡∏Ñ‡∏£‡∏ö‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ä‡∏≥‡∏£‡∏∞‡πÉ‡∏ô 3 ‡∏ß‡∏±‡∏ô ({{ due_date }})

‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô: {{ total }} ‡∏ö‡∏≤‡∏ó

[‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏•‡∏¢]

‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏£‡∏±‡∏ö
```

**Reminder 2 (7 Days Overdue):**
```
Subject: ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô: ‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏´‡∏ô‡∏µ‡πâ #{{ invoice_number }} ‡πÄ‡∏Å‡∏¥‡∏ô‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ä‡∏≥‡∏£‡∏∞

‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö‡∏Ñ‡∏∏‡∏ì {{ customer_name }},

‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏´‡∏ô‡∏µ‡πâ #{{ invoice_number }} ‡πÄ‡∏Å‡∏¥‡∏ô‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ä‡∏≥‡∏£‡∏∞‡πÅ‡∏•‡πâ‡∏ß {{ days_overdue }} ‡∏ß‡∏±‡∏ô

‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô: {{ total }} ‡∏ö‡∏≤‡∏ó
‡∏Ñ‡∏£‡∏ö‡∏Å‡∏≥‡∏´‡∏ô‡∏î: {{ due_date }}

‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ä‡∏≥‡∏£‡∏∞‡∏†‡∏≤‡∏¢‡πÉ‡∏ô 7 ‡∏ß‡∏±‡∏ô ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏´‡∏•‡∏µ‡∏Å‡πÄ‡∏•‡∏µ‡πà‡∏¢‡∏á‡∏Ñ‡πà‡∏≤‡∏õ‡∏£‡∏±‡∏ö

[‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏•‡∏¢]

‡∏´‡∏≤‡∏Å‡∏ä‡∏≥‡∏£‡∏∞‡πÅ‡∏•‡πâ‡∏ß ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÅ‡∏à‡πâ‡∏á‡∏Å‡∏•‡∏±‡∏ö‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö
```

**Reminder 3 (14+ Days Overdue):**
```
Subject: ‚ö†Ô∏è Final Notice: ‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏´‡∏ô‡∏µ‡πâ #{{ invoice_number }}

‡∏Ñ‡∏∏‡∏ì {{ customer_name }},

‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏´‡∏ô‡∏µ‡πâ #{{ invoice_number }} ‡πÄ‡∏Å‡∏¥‡∏ô‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ä‡∏≥‡∏£‡∏∞‡πÅ‡∏•‡πâ‡∏ß {{ days_overdue }} ‡∏ß‡∏±‡∏ô

‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô: {{ total }} ‡∏ö‡∏≤‡∏ó + ‡∏Ñ‡πà‡∏≤‡∏õ‡∏£‡∏±‡∏ö‡∏•‡πà‡∏≤‡∏ä‡πâ‡∏≤ {{ late_fee }} ‡∏ö‡∏≤‡∏ó
‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏¥‡πâ‡∏ô: {{ total_with_fee }} ‡∏ö‡∏≤‡∏ó

‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ä‡∏≥‡∏£‡∏∞‡∏†‡∏≤‡∏¢‡πÉ‡∏ô 3 ‡∏ß‡∏±‡∏ô ‡∏°‡∏¥‡∏â‡∏∞‡∏ô‡∏±‡πâ‡∏ô‡∏à‡∏∞‡∏™‡πà‡∏á‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÉ‡∏´‡πâ‡∏ó‡∏µ‡∏°‡∏à‡∏±‡∏î‡πÄ‡∏Å‡πá‡∏ö

‡∏™‡∏≠‡∏ö‡∏ñ‡∏≤‡∏°‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°: {{ contact_phone }}

[‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏±‡∏ô‡∏ó‡∏µ]
```

**6. Update Invoice Status**

```javascript
// PostgreSQL Node
UPDATE invoices
SET status = 'overdue'
WHERE invoice_number = :invoiceNumber AND status != 'overdue'
```

**7. Alert Internal Team**

```javascript
// Slack Node - Alert finance team
Channel: #accounts-receivable

Message:
‚ö†Ô∏è Overdue Invoices Summary

Total overdue: {{ $json.count }}
Total amount: {{ $json.totalAmount }} ‡∏ö‡∏≤‡∏ó

Critical (> 30 days): {{ $json.critical }}
- {{ $json.criticalInvoices.map(i => `#${i.invoice_number} - ${i.customer_name} - ${i.total} ‡∏ö‡∏≤‡∏ó`).join('\n- ') }}

[View Full Report]
```

## Integration ‡∏Å‡∏±‡∏ö Accounting Software {#accounting-integration}

### Xero Integration

**1. Create Invoice in Xero**

```javascript
// Xero Node (n8n official)
Operation: Create Invoice

Data:
{
  "Type": "ACCREC", // Accounts Receivable
  "Contact": {
    "ContactID": "{{ $json.xero_contact_id }}" // or create new
  },
  "Date": "{{ $json.issue_date }}",
  "DueDate": "{{ $json.due_date }}",
  "InvoiceNumber": "{{ $json.invoice_number }}",
  "LineItems": [
    {{#each items}}
    {
      "Description": "{{ this.name }}",
      "Quantity": {{ this.quantity }},
      "UnitAmount": {{ this.unit_price }},
      "TaxType": "OUTPUT" // 7% VAT
    }
    {{/each}}
  ],
  "Status": "SUBMITTED"
}
```

**2. Record Payment in Xero**

```javascript
// When payment received
Xero Node
Operation: Create Payment

Data:
{
  "Invoice": {
    "InvoiceID": "{{ $json.xero_invoice_id }}"
  },
  "Account": {
    "Code": "200" // Bank account
  },
  "Amount": {{ $json.total }},
  "Date": "{{ $json.paid_at }}"
}
```

### QuickBooks Integration

```javascript
// HTTP Request - QuickBooks API
Method: POST
URL: https://quickbooks.api.intuit.com/v3/company/{{ COMPANY_ID }}/invoice

Headers:
  Authorization: Bearer {{ $credentials.quickbooks.token }}
  Content-Type: application/json

Body:
{
  "CustomerRef": {
    "value": "{{ $json.customer_id }}"
  },
  "Line": [
    {
      "Amount": {{ $json.total }},
      "DetailType": "SalesItemLineDetail",
      "SalesItemLineDetail": {
        "ItemRef": {
          "value": "{{ $json.item_id }}"
        },
        "Qty": {{ $json.quantity }}
      }
    }
  ]
}
```

## Multi-currency & Tax Handling {#multi-currency}

### Multi-currency Support

**1. Exchange Rate Lookup**

```javascript
// HTTP Request - ExchangeRate-API
Method: GET
URL: https://api.exchangerate-api.com/v4/latest/{{ $json.base_currency }}

// Response:
{
  "base": "THB",
  "rates": {
    "USD": 0.029,
    "EUR": 0.026,
    "JPY": 4.2
  }
}
```

**2. Convert Amount**

```javascript
// Code Node
const convertCurrency = (amount, fromCurrency, toCurrency, rates) => {
  if (fromCurrency === toCurrency) return amount;

  // Convert to base currency first (THB)
  const inBaseCurrency = fromCurrency === 'THB'
    ? amount
    : amount / rates[fromCurrency];

  // Convert to target currency
  const converted = toCurrency === 'THB'
    ? inBaseCurrency
    : inBaseCurrency * rates[toCurrency];

  return Math.round(converted * 100) / 100; // 2 decimals
};

$json.amount_usd = convertCurrency($json.amount_thb, 'THB', 'USD', $json.rates);
```

**3. Display Multiple Currencies**

```html
<!-- In invoice template -->
<div class="totals">
  <div>Total: {{ total_thb }} THB</div>
  <div style="color: #666;">
    (approximately ${{ total_usd }} USD)
  </div>
</div>
```

### Tax Calculation

**1. Thailand VAT (7%)**

```javascript
// Code Node
const calculateThaiVAT = (subtotal) => {
  const VAT_RATE = 0.07;
  const vat = Math.round(subtotal * VAT_RATE * 100) / 100;
  const total = subtotal + vat;

  return {
    subtotal,
    vat,
    total,
    vat_rate: VAT_RATE
  };
};

const amounts = calculateThaiVAT($json.subtotal);
```

**2. Withholding Tax (3% for services)**

```javascript
// Code Node
const calculateWithholdingTax = (subtotal) => {
  const WHT_RATE = 0.03; // 3% for professional services
  const wht = Math.round(subtotal * WHT_RATE * 100) / 100;
  const netPayable = subtotal - wht;

  return {
    subtotal,
    wht,
    net_payable: netPayable,
    wht_rate: WHT_RATE
  };
};
```

**3. Multiple Tax Types**

```javascript
// Support different tax scenarios
const taxScenarios = {
  'standard_vat': { vat: 0.07, wht: 0 },
  'service_wht': { vat: 0.07, wht: 0.03 },
  'exempt': { vat: 0, wht: 0 },
  'zero_rated': { vat: 0, wht: 0 }
};

const calculateTax = (subtotal, scenario) => {
  const taxes = taxScenarios[scenario];
  const vat = subtotal * taxes.vat;
  const wht = subtotal * taxes.wht;
  const total = subtotal + vat - wht;

  return { subtotal, vat, wht, total };
};
```

## Reporting & Analytics {#reporting}

### Monthly Revenue Report

**1. Aggregate Invoice Data**

```javascript
// Schedule: 1st of month
// PostgreSQL Query
SELECT
  DATE_TRUNC('month', issue_date) as month,
  COUNT(*) as total_invoices,
  SUM(CASE WHEN status = 'paid' THEN 1 ELSE 0 END) as paid_count,
  SUM(CASE WHEN status = 'overdue' THEN 1 ELSE 0 END) as overdue_count,
  SUM(total) as total_billed,
  SUM(CASE WHEN status = 'paid' THEN total ELSE 0 END) as total_collected,
  AVG(EXTRACT(DAY FROM (paid_at - issue_date))) as avg_days_to_payment
FROM invoices
WHERE issue_date >= DATE_TRUNC('month', NOW() - INTERVAL '1 month')
  AND issue_date < DATE_TRUNC('month', NOW())
GROUP BY DATE_TRUNC('month', issue_date)
```

**2. Aging Report (AR Aging)**

```javascript
// Code Node - Accounts Receivable Aging
const now = new Date();

const agingBuckets = {
  'current': [], // 0-30 days
  '31_60': [],
  '61_90': [],
  'over_90': []
};

unpaidInvoices.forEach(invoice => {
  const daysOutstanding = Math.floor((now - new Date(invoice.issue_date)) / (1000*60*60*24));

  if (daysOutstanding <= 30) agingBuckets.current.push(invoice);
  else if (daysOutstanding <= 60) agingBuckets['31_60'].push(invoice);
  else if (daysOutstanding <= 90) agingBuckets['61_90'].push(invoice);
  else agingBuckets.over_90.push(invoice);
});

const report = {
  current: { count: agingBuckets.current.length, amount: sum(agingBuckets.current) },
  days_31_60: { count: agingBuckets['31_60'].length, amount: sum(agingBuckets['31_60']) },
  days_61_90: { count: agingBuckets['61_90'].length, amount: sum(agingBuckets['61_90']) },
  over_90: { count: agingBuckets.over_90.length, amount: sum(agingBuckets.over_90) }
};
```

**3. Send Report Email**

```javascript
// Gmail Node
To: finance@company.com
Subject: Monthly Invoice Report - {{ $json.month }}

Body:
<h2>Invoice Summary - {{ month }}</h2>

<table>
  <tr>
    <td>Total Invoices Issued:</td>
    <td>{{ total_invoices }}</td>
  </tr>
  <tr>
    <td>Total Billed:</td>
    <td>{{ total_billed }} THB</td>
  </tr>
  <tr>
    <td>Total Collected:</td>
    <td>{{ total_collected }} THB</td>
  </tr>
  <tr>
    <td>Collection Rate:</td>
    <td>{{ (total_collected / total_billed * 100).toFixed(1) }}%</td>
  </tr>
  <tr>
    <td>Avg Days to Payment:</td>
    <td>{{ avg_days_to_payment.toFixed(1) }} days</td>
  </tr>
</table>

<h3>AR Aging</h3>
<table>
  <tr><th>Bucket</th><th>Count</th><th>Amount</th></tr>
  <tr><td>0-30 days</td><td>{{ current.count }}</td><td>{{ current.amount }} THB</td></tr>
  <tr><td>31-60 days</td><td>{{ days_31_60.count }}</td><td>{{ days_31_60.amount }} THB</td></tr>
  <tr><td>61-90 days</td><td>{{ days_61_90.count }}</td><td>{{ days_61_90.amount }} THB</td></tr>
  <tr><td>Over 90 days</td><td>{{ over_90.count }}</td><td>{{ over_90.amount }} THB</td></tr>
</table>

[View Dashboard]
```

## Best Practices {#best-practices}

### 1. Invoice Numbering

```javascript
// Sequential numbering with prefix
Format: INV-YYYY-####

Examples:
- INV-2025-0001
- INV-2025-0002
- ...

// Never skip numbers
// Never reuse numbers
// Include year for easy filtering
```

### 2. Error Handling

```javascript
// Try-catch for critical operations

try {
  const pdf = await generatePDF(invoiceData);
  const uploaded = await uploadToStorage(pdf);
  await sendEmail(customer, uploaded.url);
  await updateDatabase(invoiceId, 'sent');
} catch (error) {
  // Log error
  await logError(invoiceId, error);

  // Alert team
  await sendSlackAlert(`Invoice ${invoiceId} failed: ${error.message}`);

  // Set status
  await updateDatabase(invoiceId, 'error');
}
```

### 3. Audit Trail

```javascript
// Log all actions
CREATE TABLE invoice_audit_log (
  id SERIAL PRIMARY KEY,
  invoice_id INTEGER,
  action VARCHAR, -- created, sent, paid, reminded, cancelled
  user_id INTEGER,
  timestamp TIMESTAMP DEFAULT NOW(),
  metadata JSONB
);

// Log every change
INSERT INTO invoice_audit_log (invoice_id, action, metadata)
VALUES ($1, 'sent', '{"recipient": "customer@example.com"}');
```

### 4. Backup PDFs

```javascript
// Always keep PDF backups
// Even after payment, keep for 7 years (tax requirement)

// Store in multiple places:
1. Cloud storage (S3/GCS) - primary
2. Google Drive - backup
3. Local backups - disaster recovery
```

### 5. Security

```javascript
// Protect sensitive data

// 1. Encrypt PDF links (signed URLs)
const signedUrl = storage.getSignedUrl({
  action: 'read',
  expires: Date.now() + 7 * 24 * 60 * 60 * 1000 // 7 days
});

// 2. Don't expose invoice IDs in URLs
// Use UUIDs instead
const accessToken = generateUUID();

// 3. Rate limit payment links
// Prevent brute force

// 4. Log all access
```

## ‡∏Å‡∏£‡∏ì‡∏µ‡∏®‡∏∂‡∏Å‡∏©‡∏≤: Freelance Agency {#case-study}

### Agency: Web Development Freelancers

**‡∏õ‡∏±‡∏ç‡∏´‡∏≤:**
- ‡∏™‡πà‡∏á‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏´‡∏ô‡∏µ‡πâ‡∏•‡πà‡∏≤‡∏ä‡πâ‡∏≤ 7-14 ‡∏ß‡∏±‡∏ô
- ‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏•‡∏≤ 30-45 ‡∏ô‡∏≤‡∏ó‡∏µ/‡πÉ‡∏ö
- ‡∏•‡∏∑‡∏° follow up ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏Ñ‡πâ‡∏≤‡∏á‡∏ä‡∏≥‡∏£‡∏∞
- Cash flow ‡πÑ‡∏°‡πà‡∏î‡∏µ (‡∏£‡∏≠‡πÄ‡∏á‡∏¥‡∏ô 45-60 ‡∏ß‡∏±‡∏ô)

**Solution ‡∏î‡πâ‡∏ß‡∏¢ n8n:**

**Workflow Setup:**

```
1. Project Completion
    ‚Üì
2. Auto-generate invoice (5 min after completion)
    ‚Üì
3. Send email + payment link
    ‚Üì
4. Track payment (Stripe webhook)
    ‚Üì
5. Auto reminders (Day 25, 30, 35)
    ‚Üì
6. Update Xero accounting
```

**Implementation:**

**Trigger:** Notion database
- When project status ‚Üí "Completed"
- Auto extract: client info, hours worked, hourly rate

**Auto-calculate:**
```javascript
// Hours worked √ó Rate
Subtotal: 40 hours √ó $50/hr = $2,000
Tax (7%): $140
Total: $2,140
```

**Generate & Send (< 5 min):**
- PDF created
- Email sent with Stripe payment link
- Client can pay immediately

**Payment tracking:**
- Stripe webhook ‚Üí mark as paid
- Auto-thank you email
- Xero invoice updated

**Results:**

**Before Automation:**
- Invoice delay: 7-14 days
- Time per invoice: 30 min
- Payment delay: 45 days avg
- Follow-up rate: 40%

**After Automation:**
- Invoice delay: < 1 hour (95% improvement)
- Time per invoice: 3 min (90% less)
- Payment delay: 18 days avg (60% faster)
- Follow-up rate: 100%

**Financial Impact:**

```
Monthly invoices: 50
Time saved: 50 √ó 27 min = 1,350 min (22.5 hrs)
Value: 22.5 hrs √ó $50/hr = $1,125/month

Faster payment:
- Get paid 27 days earlier
- Average invoice: $2,000
- Interest saved: ~$50/invoice √ó 50 = $2,500/month

Total benefit: ~$3,625/month
Investment: $50/month (n8n + APIs)
ROI: 7,150%
```

## FAQ {#faq}

### Q1: ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ accounting knowledge ‡πÑ‡∏´‡∏°?

**A:** ‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô‡∏Å‡πá‡∏û‡∏≠

**‡∏Ñ‡∏ß‡∏£‡∏£‡∏π‡πâ:**
- Invoice vs Receipt
- Tax types (VAT, WHT)
- Payment terms (Net 30, etc.)

**‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏π‡πâ:**
- Double-entry bookkeeping
- Advanced accounting

### Q2: PDF generation ‡∏ä‡πâ‡∏≤‡πÑ‡∏´‡∏°?

**A:** ‡πÄ‡∏£‡πá‡∏ß‡∏°‡∏≤‡∏Å (< 5 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ)

**Options:**
- **Puppeteer**: 2-5 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ/‡πÉ‡∏ö
- **Gotenberg**: 1-2 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ/‡πÉ‡∏ö
- **PDFKit**: < 1 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ (‡πÅ‡∏ï‡πà‡∏ï‡πâ‡∏≠‡∏á code ‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤)

### Q3: AI OCR ‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥‡πÅ‡∏Ñ‡πà‡πÑ‡∏´‡∏ô?

**A:** 90-95% ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á

**GPT-4 Vision:**
- ‡∏≠‡πà‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏ó‡∏±‡πâ‡∏á‡πÑ‡∏ó‡∏¢‡πÅ‡∏•‡∏∞‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©
- ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à layout ‡∏Ç‡∏≠‡∏á invoice
- Extract structured data ‡πÑ‡∏î‡πâ‡∏î‡∏µ

**Tips:**
- ‡πÉ‡∏ä‡πâ‡∏£‡∏π‡∏õ/PDF ‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏™‡∏π‡∏á
- Validate ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏•‡∏±‡∏á extract
- Human review ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏¢‡∏≠‡∏∞

### Q4: ‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏´‡∏£‡πà?

**Setup ‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô:**
```
n8n self-hosted: ‡∏ü‡∏£‡∏µ + VPS $10
Stripe: 2.95% + $0.30 per transaction
OpenAI API: ~$0.01/invoice (OCR)
SendGrid: ‡∏ü‡∏£‡∏µ (100 emails/day)
Total: ~$10 + % of sales
```

**vs Manual:**
- ‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î‡πÄ‡∏ß‡∏•‡∏≤ 90%
- Get paid 30-60% ‡πÄ‡∏£‡πá‡∏ß‡∏Ç‡∏∂‡πâ‡∏ô
- ‡∏•‡∏î errors ‚Üí ‡∏•‡∏î‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢

### Q5: ‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡πÑ‡∏´‡∏°?

**A:** ‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢ ‡∏ñ‡πâ‡∏≤‡∏ó‡∏≥‡∏ñ‡∏π‡∏Å‡∏ß‡∏¥‡∏ò‡∏µ

**Best practices:**
- ‡πÉ‡∏ä‡πâ HTTPS ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö webhooks
- Encrypt PDFs (password-protected)
- Signed URLs (expire after 7 days)
- Log all access
- Backup data regularly

### Q6: Support ‡∏´‡∏•‡∏≤‡∏¢‡∏™‡∏Å‡∏∏‡∏•‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏î‡πâ‡πÑ‡∏´‡∏°?

**A:** ‡πÑ‡∏î‡πâ!

**Implementation:**
- Store in base currency (THB)
- Convert on-the-fly (exchange rate API)
- Display multiple currencies in invoice
- Stripe supports 135+ currencies

## ‡∏™‡∏£‡∏∏‡∏õ {#conclusion}

Invoice Automation ‡∏î‡πâ‡∏ß‡∏¢ n8n + AI ‡∏ä‡πà‡∏ß‡∏¢‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î‡πÄ‡∏ß‡∏•‡∏≤ ‡∏•‡∏î errors ‡πÅ‡∏•‡∏∞‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÑ‡∏î‡πâ‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏£‡πá‡∏ß‡∏Ç‡∏∂‡πâ‡∏ô

### ‡∏Ç‡πâ‡∏≠‡∏î‡∏µ‡∏´‡∏•‡∏±‡∏Å

‚úÖ **‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î‡πÄ‡∏ß‡∏•‡∏≤ 90%** ‡∏™‡∏£‡πâ‡∏≤‡∏á-‡∏™‡πà‡∏á‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏´‡∏ô‡∏µ‡πâ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
‚úÖ **Zero errors** ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á 100%
‚úÖ **Get paid faster** ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏£‡πá‡∏ß‡∏Ç‡∏∂‡πâ‡∏ô 30-60%
‚úÖ **Never miss follow-up** ‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
‚úÖ **Real-time visibility** ‡∏£‡∏π‡πâ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ó‡∏∏‡∏Å‡πÉ‡∏ö‡∏ï‡∏•‡∏≠‡∏î‡πÄ‡∏ß‡∏•‡∏≤
‚úÖ **AI-powered** OCR extract data, auto-categorize

### ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£

1. Setup n8n + payment gateway (Stripe/Omise)
2. ‡∏™‡∏£‡πâ‡∏≤‡∏á invoice template (HTML/CSS)
3. Build basic workflow (create ‚Üí send ‚Üí track)
4. ‡πÄ‡∏û‡∏¥‡πà‡∏° auto reminders
5. Integrate accounting software
6. Scale up!

---

### ‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á

- [n8n CRM Automation](/blog/n8n-crm-automation/)
- [n8n Email Marketing Automation](/blog/n8n-email-marketing/)
- [AI Data Analysis ‡∏Å‡∏±‡∏ö Google Sheets](/blog/ai-data-analysis-spreadsheet/)
- [n8n Database Sync](/blog/n8n-database-sync/)
- [‡∏Ñ‡∏≠‡∏£‡πå‡∏™ AI ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ú‡∏π‡πâ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô](/blog/ai-prompt-writing-techniques/)

---

**‡∏™‡∏ô‡πÉ‡∏à‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏Ñ‡∏≠‡∏£‡πå‡∏™ n8n Automation?** ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏∞‡∏ö‡∏ö invoice automation ‡πÅ‡∏•‡∏∞‡∏£‡∏∞‡∏ö‡∏ö‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏≠‡∏∑‡πà‡∏ô‡πÜ ‡∏ó‡∏µ‡πà‡∏ä‡πà‡∏ß‡∏¢‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏•‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ
üëâ [‡∏î‡∏π‡∏Ñ‡∏≠‡∏£‡πå‡∏™‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå](https://aiunlock.co/) | [‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏™‡∏≠‡∏ö‡∏ñ‡∏≤‡∏°](/contact/)
